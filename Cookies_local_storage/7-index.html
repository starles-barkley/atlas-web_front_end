<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>7-index.html</title>
  </head>
  <body>
    
      <h1>Shopping Cart</h1>
      <div id="store"></div>
      <div id="cart"></div>

    <script>
      const availableItems = ['Shampoo', 'Soap', 'Sponge', 'Water'];

      if (typeof(Storage) === "undefined") {
          alert('Sorry, your browser does not support Web storage. Try again with a better one.');
      } else {
          createStore();
          displayCart();
      }

      function getCartFromStorage() {
          const cart = sessionStorage.getItem('cart');
          return cart ? JSON.parse(cart) : {};
      }

      function addItemToCart(item) {
          const cart = getCartFromStorage();
          cart[item] = (cart[item] || 0) + 1;
          sessionStorage.setItem('cart', JSON.stringify(cart));
          displayCart();
      }

      function removeItemFromCart(item) {
          const cart = getCartFromStorage();
          delete cart[item];
          sessionStorage.setItem('cart', JSON.stringify(cart));
          displayCart();
      }

      function clearCart() {
          sessionStorage.clear();
          displayCart();
      }

      function createStore() {
          const storeDiv = document.getElementById('store');
          const header = document.createElement('h2');
          header.innerText = 'Available products:';
          storeDiv.appendChild(header);

          const list = document.createElement('ul');
          availableItems.forEach(item => {
              const listItem = document.createElement('li');
              listItem.innerText = item;
              listItem.addEventListener('click', () => addItemToCart(item));
              list.appendChild(listItem);
          });
          storeDiv.appendChild(list);
      }

      function displayCart() {
          const cartDiv = document.getElementById('cart');
          cartDiv.innerHTML = '';
          
          const header = document.createElement('h2');
          header.innerText = 'Your cart:';
          cartDiv.appendChild(header);

          const clearCartButton = document.createElement('button');
          clearCartButton.innerText = 'Clear my cart';
          clearCartButton.addEventListener('click', clearCart);
          cartDiv.appendChild(clearCartButton);

          const cartContent = document.createElement('div');
          cartDiv.appendChild(cartContent);

          updateCart(cartContent);
      }

      function updateCart(cartContent) {
        const cart = getCartFromStorage();
        cartContent.innerHTML = '';

        const list = document.createElement('ul');
        const items = Object.keys(cart);

        if (items.length === 0) {
            const listItem = document.createElement('li');
            listItem.innerText = 'Your cart is empty';
            list.appendChild(listItem);
        } else {
            items.forEach(item => {
                const listItem = document.createElement('li');
                listItem.innerHTML = `${item} x ${cart[item]} <button onclick="removeItemFromCart('${item}')">Remove</button>`;
                list.appendChild(listItem);
            });
        }
        cartContent.appendChild(list);
    }
    </script>
  </body>
</html>